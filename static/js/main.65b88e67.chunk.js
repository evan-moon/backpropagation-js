(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(t,e,a){t.exports=a(44)},29:function(t,e,a){},32:function(t,e,a){},41:function(t,e,a){},42:function(t,e,a){},44:function(t,e,a){"use strict";a.r(e);a(29),a(30),a(31),a(32);var n=a(0),r=a.n(n),i=a(15),o=a.n(i),s=a(13),c=a(12),l=a(25),u=a(3),h=5,p=3,d=.2,f=500,g=250;function y(t){for(var e=[],a=0;a<t;a++)e.push(.9*Math.random()+.1);return e}var v={nodeGraphicData:null,errorDataset:null,outputDataset:null,learningResult:null,learningRate:d,learningLimit:f,nodePerLayer:p,layerCount:h,inputs:[],targets:y(p),totalLoss:-1},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_LEARNING_RATE":return Object(u.a)(Object(u.a)({},t),{},{learningRate:e.payload.rate});case"SET_LEARNING_LIMIT":return Object(u.a)(Object(u.a)({},t),{},{learningLimit:e.payload.limit});case"SET_NODE_PER_LAYER":return Object(u.a)(Object(u.a)({},t),{},{nodePerLayer:e.payload.count});case"SET_LAYER_COUNT":return Object(u.a)(Object(u.a)({},t),{},{layerCount:e.payload.count});case"SET_INPUTS":return Object(u.a)(Object(u.a)({},t),{},{inputs:e.payload.inputs});case"SET_NODE_GRAPHIC_DATA":return Object(u.a)(Object(u.a)({},t),{},{nodeGraphicData:e.payload.data});case"DESTROY_NODE_GRAPHIC_DATA":return Object(u.a)(Object(u.a)({},t),{},{nodeGraphicData:null});case"SET_ERROR_DATASET":return Object(u.a)(Object(u.a)({},t),{},{errorDataset:e.payload.data});case"DESTROY_ERROR_DATASET":return Object(u.a)(Object(u.a)({},t),{},{errorDataset:null});case"SET_OUTPUT_DATASET":return Object(u.a)(Object(u.a)({},t),{},{outputDataset:e.payload.data});case"DESTROY_OUTPUT_DATASET":return Object(u.a)(Object(u.a)({},t),{},{outputDataset:null});case"SET_LEARNING_RESULT":return Object(u.a)(Object(u.a)({},t),{},{learningResult:e.payload.result});case"DESTROY_LEARNING_RESULT":return Object(u.a)(Object(u.a)({},t),{},{learningResult:null});case"SET_TOTAL_LOSS":return Object(u.a)(Object(u.a)({},t),{},{totalLoss:e.payload.loss});case"DESTROY_TOTAL_LOSS":return Object(u.a)(Object(u.a)({},t),{},{totalLoss:-1});default:return t}},E=Object(l.createLogger)(),L=Object(c.c)(m,Object(c.a)(E)),b=d,O=f,R=p,T=h,j=function(){return{type:"SET_LEARNING_RATE",payload:{rate:arguments.length>0&&void 0!==arguments[0]?arguments[0]:b}}},k=function(){return{type:"SET_LEARNING_LIMIT",payload:{limit:arguments.length>0&&void 0!==arguments[0]?arguments[0]:O}}},w=function(){return{type:"SET_NODE_PER_LAYER",payload:{count:arguments.length>0&&void 0!==arguments[0]?arguments[0]:R}}},S=function(){return{type:"SET_LAYER_COUNT",payload:{count:arguments.length>0&&void 0!==arguments[0]?arguments[0]:T}}},_=a(10),A=a(6),C=a(7);function N(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?N(t)*(1-N(t)):1/(1+Math.exp(-t))}function D(t,e){if(t.length!==e.length)throw new Error("target and value must have same length!");var a=0;return t.forEach(function(t,n){a+=Math.pow(t-e[n],2)}),a*=1/t.length}function P(t,e){return t.map(function(t,a){return-(t-e[a])})}var x=function(){function t(e,a){Object(A.a)(this,t),this.id="anonymous-neuron",this.inputs=[],this.weights=[],this.variableLength=void 0,this.notActivatedResult=void 0,this.activatedResult=void 0,this.activatedResultPrime=void 0,this.weightPrimes=void 0,this.id=e,this.weights=Object(_.a)(a),this.variableLength=a.length,this.notActivatedResult=0,this.activatedResult=0,this.activatedResultPrime=0,this.weightPrimes=[]}return Object(C.a)(t,[{key:"setInputs",value:function(t){if(t.length!==this.variableLength)throw new Error("Error in ".concat(this.id," :: ").concat(t.length," is must be ").concat(this.variableLength));this.inputs=Object(_.a)(t)}},{key:"calc",value:function(){this.notActivatedResult=function(t,e){if(t.length!==e.length)throw new Error("m.length = ".concat(t.length,", n.length = ").concat(e.length,". Can't multiplation! They must have same length"));var a=0;return t.forEach(function(t,n){a+=t*e[n]}),a}(this.inputs,this.weights),this.activatedResult=N(this.notActivatedResult),this.activatedResultPrime=N(this.notActivatedResult,!0)}},{key:"getCalcedResult",value:function(){return this.activatedResult}},{key:"getWeightPrimes",value:function(){return this.weightPrimes}},{key:"updateWeights",value:function(t,e){var a=this;this.weights=this.weights.map(function(n,r){var i=t*a.activatedResultPrime,o=i*a.inputs[r];return a.weightPrimes[r]=i*n,n-e*o})}}]),t}(),I=function(){function t(e){Object(A.a)(this,t),this.id="",this.prevLayer=null,this.nextLayer=null,this.length=0,this.neurons=[],this.id=e}return Object(C.a)(t,[{key:"pushNeuron",value:function(t){this.neurons.push(t),this.length=this.neurons.length}},{key:"setInputs",value:function(t){this.neurons.forEach(function(e){return e.setInputs(t)})}},{key:"setPrevLayer",value:function(t){this.prevLayer=t}},{key:"setNextLayer",value:function(t){this.nextLayer=t}},{key:"calc",value:function(){this.neurons.forEach(function(t){t.calc()});var t=this.getResults();this.nextLayer&&this.nextLayer.setInputs(t)}},{key:"getNeurons",value:function(){return this.neurons}},{key:"getResults",value:function(){return this.neurons.map(function(t){return t.getCalcedResult()})}},{key:"getForwardLoss",value:function(t){var e=this.getResults();return{forward:D(t,e),primes:P(t,e)}}},{key:"getLosses",value:function(){return this.neurons.map(function(t){return t.getWeightPrimes()})}},{key:"updateWeights",value:function(t,e){this.nextLayer?this.neurons.forEach(function(a,n){var r=t.reduce(function(t,e){return t+e[n]},0);a.updateWeights(r,e)}):this.neurons.forEach(function(a,n){return a.updateWeights(t[n],e)})}}]),t}(),G=function(){function t(e,a){if(Object(A.a)(this,t),this.layers=[],this.firstLayer=null,this.lastLayer=null,this.targets=void 0,this.inputs=void 0,this.totalLoss=-1,this.totalLossPrimes=[],this.output=[],this.learningRate=0,this.nodes=[],this.links=[],e.length!==a.length)throw new Error("targets must have same length with inputs");this.targets=e,this.inputs=a}return Object(C.a)(t,[{key:"setLearningRate",value:function(t){this.learningRate=t}},{key:"createNodes",value:function(t,e){for(var a=this,n=0;n<t;n++){for(var r=new I("layer-".concat(n)),i=0;i<e;i++){for(var o=[],s=0;s<this.inputs.length;s++)o.push(Math.random());var c="neuron-[".concat(n,"][").concat(i,"]"),l=new x(c,o);r.pushNeuron(l)}0===n&&(this.firstLayer=r,this.firstLayer.setInputs(this.inputs)),n===t-1&&(this.lastLayer=r),this.layers.push(r)}this.layers.forEach(function(t,e){var n=a.layers[e-1],r=a.layers[e+1];n&&t.setPrevLayer(n),r&&t.setNextLayer(r)}),this.layers.forEach(function(t,e){t.getNeurons().forEach(function(n,r){a.nodes.push({id:n.id,name:"[".concat(e,"][").concat(r,"]"),x:e,y:r}),t.nextLayer&&t.nextLayer.getNeurons().forEach(function(t){a.links.push({source:n.id,target:t.id,value:1})})})})}},{key:"getNetworkGraphicData",value:function(){return{nodes:this.nodes,links:this.links}}},{key:"forwardPropagation",value:function(){this.layers.forEach(function(t){t.calc()});var t=this.lastLayer.getForwardLoss(this.targets);this.output=this.lastLayer.getResults(),this.totalLoss=t.forward,this.totalLossPrimes=t.primes}},{key:"backPropagation",value:function(){var t=this,e=Object(_.a)(this.layers).reverse(),a=this.learningRate;e.forEach(function(e){if(e.id===t.lastLayer.id)e.updateWeights(t.totalLossPrimes,a);else{var n=e.nextLayer.getLosses();e.updateWeights(n,a)}})}},{key:"getResults",value:function(){return this.lastLayer.getResults()}},{key:"getTotalLoss",value:function(){return this.totalLoss}}]),t}(),M=function(t){var e=t.targets,a=t.layerCount,n=t.nodePerLayer,r=t.learningRate,i=t.learningLimit;L.dispatch({type:"DESTROY_NODE_GRAPHIC_DATA",payload:{}}),L.dispatch({type:"DESTROY_ERROR_DATASET",payload:{}}),L.dispatch({type:"DESTROY_OUTPUT_DATASET",payload:{}}),L.dispatch({type:"DESTROY_LEARNING_RESULT",payload:{}}),L.dispatch({type:"DESTROY_TOTAL_LOSS",payload:{}});var o=e.map(function(t){return Math.random()+t});L.dispatch(function(t){return{type:"SET_INPUTS",payload:{inputs:t}}}(o));var s=new G(e,o);s.createNodes(a,n),s.setLearningRate(r);var c=s.getNetworkGraphicData();L.dispatch({type:"SET_NODE_GRAPHIC_DATA",payload:{data:c}});for(var l=[],u=e.map(function(){return[]}),h=0;h<i;h++)s.forwardPropagation(),s.backPropagation(),l.push(s.getTotalLoss()),s.getResults().forEach(function(t,e){u[e].push(t)});L.dispatch(function(t){return{type:"SET_ERROR_DATASET",payload:{data:t}}}(l)),L.dispatch(function(t){return{type:"SET_OUTPUT_DATASET",payload:{data:t}}}(u)),L.dispatch({type:"SET_LEARNING_RESULT",payload:{result:s.getResults()}}),L.dispatch({type:"SET_TOTAL_LOSS",payload:{loss:s.getTotalLoss()}})},U=a(9),Y=a(8),W=(a(41),a(11)),B=function(t){Object(U.a)(a,t);var e=Object(Y.a)(a);function a(){var t;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).selector="networkView",t}return Object(C.a)(a,[{key:"init",value:function(){var t=document.getElementById(this.selector),e=this.props,a=e.nodes,n=e.links;t?t.innerHTML="":console.error("There is no DOM element #".concat(this.selector));var r=g,i=document.getElementById(this.selector).offsetWidth;r+=200;var o=W.select("#".concat(this.selector)).append("svg:svg").attr("width",i).attr("height",r),s=W.forceSimulation().force("link",W.forceLink().id(function(t){return t.id})).force("charge",W.forceManyBody().strength(-400)).force("center",W.forceCenter(i/2,r/2)).force("x",W.forceX()).force("y",W.forceY()),c=o.append("g"),l=c.append("g").style("stroke","#ffffff").selectAll("line").data(n).enter().append("line"),u=c.append("g").attr("class","nodes").selectAll("circle").data(a).enter().append("circle"),h=c.append("g").attr("class","labels").selectAll("text").data(a).enter().append("text").attr("class","label").text(function(t){return t.name});n.forEach(function(t){a.forEach(function(e){e.id===t.source?t.sourceNode=e:e.id===t.target&&(t.targetNode=e)})}),s.nodes(a).on("tick",function(){l.attr("x1",function(t){return t.sourceNode.x}).attr("y1",function(t){return t.sourceNode.y}).attr("x2",function(t){return t.targetNode.x}).attr("y2",function(t){return t.targetNode.y}),u.attr("r",12).style("fill","transparent").style("stroke","#ffffff").style("stroke-width","1px").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),h.attr("x",function(t){return t.x-15}).attr("y",function(t){return t.y-17}).style("font-size","12px").style("fill","#ffffff")})}},{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){return r.a.createElement("div",{id:this.selector})}}]),a}(r.a.Component),H=a(16),V=function(t){Object(U.a)(a,t);var e=Object(Y.a)(a);function a(){var t;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).label="Loss",t.selector="lossView",t.chart=null,t}return Object(C.a)(a,[{key:"init",value:function(){var t=document.getElementById(this.selector),e=this.props.losses;t?t.innerHTML="":console.error("There is no DOM element #".concat(this.selector)),this.chart=H.generate({bindto:"#".concat(this.selector),data:{columns:[]},size:{height:g},axis:{x:{type:"indexed",tick:{count:f/50,format:function(t){var e=Number(t);return Math.round(e)}}}},point:{show:!1},color:{pattern:["#ffffff"]}});var a=[[this.label].concat(Object(_.a)(e))];this.chart.load({columns:a})}},{key:"componentDidMount",value:function(){console.log("loss view"),this.init()}},{key:"render",value:function(){return r.a.createElement("div",{id:this.selector})}}]),a}(r.a.Component),F=function(t){Object(U.a)(a,t);var e=Object(Y.a)(a);function a(){var t;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).label="Output",t.selector="outputView",t.chart=null,t}return Object(C.a)(a,[{key:"init",value:function(){var t=this,e=document.getElementById(this.selector),a=this.props.outputs;e?e.innerHTML="":console.error("There is no DOM element #".concat(this.selector)),this.chart=H.generate({bindto:"#".concat(this.selector),data:{columns:[]},size:{height:g},axis:{x:{type:"indexed",tick:{count:f/50,format:function(t){var e=Number(t);return Math.round(e)}}}},point:{show:!1},color:{pattern:["#48cfad","#7986cb","#e8eaf6","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]}});var n=a.map(function(e,a){return["".concat(t.label).concat(a)].concat(Object(_.a)(e))});this.chart.load({columns:n})}},{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){return r.a.createElement("div",{id:this.selector})}}]),a}(r.a.Component),z=(a(42),a(47)),J=a(26),X=a(48),$=[1,2,3,4,5],q=[1,2,3,4,5],K=function(t){Object(U.a)(a,t);var e=Object(Y.a)(a);function a(){var t;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={nodePerLayer:parseInt(t.props.nodePerLayer),layerCount:parseInt(t.props.layerCount),learningRate:parseFloat(t.props.learningRate),learningLimit:parseFloat(t.props.learningLimit)},t}return Object(C.a)(a,[{key:"onChangeNodePerLayer",value:function(t){var e=parseInt(t.currentTarget.value);this.setState(Object(u.a)(Object(u.a)({},this.state),{},{nodePerLayer:e}))}},{key:"onChangeLayerCount",value:function(t){var e=parseInt(t.currentTarget.value);this.setState(Object(u.a)(Object(u.a)({},this.state),{},{layerCount:e}))}},{key:"onChangeLearningRate",value:function(t){var e=parseFloat(t.currentTarget.value);this.setState(Object(u.a)(Object(u.a)({},this.state),{},{learningRate:e}))}},{key:"onChangeLearningLimit",value:function(t){var e=parseFloat(t.currentTarget.value);this.setState(Object(u.a)(Object(u.a)({},this.state),{},{learningLimit:e}))}},{key:"onClickActivate",value:function(){var t=this.state,e=t.nodePerLayer,a=t.layerCount,n=t.learningRate,r=t.learningLimit;this.props.setNodePerLayer(e),this.props.setLayerCount(a),this.props.setLearningRate(n),this.props.setLearningLimit(r);var i=y(e);M({targets:i,layerCount:a,nodePerLayer:e,learningRate:n,learningLimit:r})}},{key:"render",value:function(){return r.a.createElement(z.a,{className:"control-panel"},r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Group,{as:J.a},r.a.createElement(z.a.Label,null,"Node per Layer"),r.a.createElement(z.a.Control,{as:"select",defaultValue:this.props.nodePerLayer,onChange:this.onChangeNodePerLayer.bind(this)},$.map(function(t){return r.a.createElement("option",{value:t,key:t},t)}))),r.a.createElement(z.a.Group,{as:J.a},r.a.createElement(z.a.Label,null,"Layer Count"),r.a.createElement(z.a.Control,{as:"select",defaultValue:this.props.layerCount,onChange:this.onChangeLayerCount.bind(this)},q.map(function(t){return r.a.createElement("option",{value:t,key:t},t)}))),r.a.createElement(z.a.Group,{as:J.a},r.a.createElement(z.a.Label,null,"Learning Rate"),r.a.createElement(z.a.Control,{type:"number",defaultValue:this.props.learningRate,onChange:this.onChangeLearningRate.bind(this)})),r.a.createElement(z.a.Group,{as:J.a},r.a.createElement(z.a.Label,null,"Learning Limit"),r.a.createElement(z.a.Control,{type:"number",defaultValue:this.props.learningLimit,onChange:this.onChangeLearningLimit.bind(this)}))),r.a.createElement(z.a.Row,null,r.a.createElement(J.a,null,r.a.createElement(X.a,{id:"active-button",variant:"outline-light",onClick:this.onClickActivate.bind(this)},"Activate"))))}}]),a}(r.a.Component),Q=Object(s.b)(function(t){var e=t.learningRate,a=t.learningLimit,n=t.nodePerLayer,r=t.layerCount;return{learningRate:e.toString(),learningLimit:a.toString(),nodePerLayer:n.toString(),layerCount:r.toString()}},function(t){return Object(c.b)({setNodePerLayer:w,setLayerCount:S,setLearningRate:j,setLearningLimit:k},t)})(K),Z=a(45),tt=a(46),et=function(t){Object(U.a)(a,t);var e=Object(Y.a)(a);function a(){var t;Object(A.a)(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).networkRef=Object(n.createRef)(),t.errorChartRef=Object(n.createRef)(),t.outputChartRef=Object(n.createRef)(),t}return Object(C.a)(a,[{key:"printResult",value:function(){var t=this.props.storeState;console.log("============================== Result =================================="),console.log("Loss: ".concat(t.totalLoss)),console.log("Inputs: [".concat(t.inputs,"]")),console.log("Outputs: [".concat(t.learningResult,"]")),console.log("Targets: [".concat(t.targets,"]")),console.log("========================================================================")}},{key:"componentDidMount",value:function(){this.printResult()}},{key:"componentDidUpdate",value:function(){this.networkRef.current.init(),this.errorChartRef.current.init(),this.outputChartRef.current.init(),this.printResult()}},{key:"render",value:function(){var t=this.props.storeState;return r.a.createElement("div",{className:"App"},r.a.createElement(Z.a,{fluid:!0},r.a.createElement(tt.a,{noGutters:!0},r.a.createElement(J.a,{xs:12},r.a.createElement(Q,null)),r.a.createElement(J.a,{xs:12},r.a.createElement("div",{id:"network-display",className:"border-box"},r.a.createElement("h3",null,"Network"),r.a.createElement(B,{ref:this.networkRef,nodes:t.nodeGraphicData.nodes,links:t.nodeGraphicData.links}))),r.a.createElement(J.a,{xs:12,xl:6},r.a.createElement("div",{id:"loss-rate-chart",className:"chart-wrapper border-box"},r.a.createElement("h3",null,"Error Loss"),r.a.createElement(V,{ref:this.errorChartRef,losses:t.errorDataset}))),r.a.createElement(J.a,{xs:12,xl:6},r.a.createElement("div",{id:"output-chart",className:"chart-wrapper border-box"},r.a.createElement("h3",null,"Outputs"),r.a.createElement(F,{ref:this.outputChartRef,outputs:t.outputDataset}))))))}}]),a}(r.a.Component),at=Object(s.b)(function(t){return{storeState:t}})(et);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nt=L.getState(),rt=nt.targets,it=nt.layerCount,ot=nt.nodePerLayer,st=nt.learningRate,ct=nt.learningLimit;M({targets:rt,layerCount:it,nodePerLayer:ot,learningRate:st,learningLimit:ct}),o.a.render(r.a.createElement(s.a,{store:L},r.a.createElement(at,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.65b88e67.chunk.js.map